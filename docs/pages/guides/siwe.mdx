import { Callout } from 'vocs/components'

# Using Smart Wallet with Sign-In with Ethereum

This guide covers creating a new Sign-In with Ethereum template project that uses Smart Wallet.

## 1. Create a project 
Follow the [wagmi guide](/guides/create-app/using-wagmi).

## 2. Install dependencies

:::code-group

```bash [pnpm]
pnpm install siwe
```

```bash [bun]
bun install siwe
```

:::

## 3. Create SIWE component

<Callout type="warning">
This simple example does not check the nonce during verification, all production implementations should. Furthermore, you likely want to invalidate nonces on logout to prevent replay attacks through session duplication (e.g. store expired nonce and make sure they can't be used again).
</Callout>


```ts twoslash
  import { useCallback, useEffect, useMemo, useState } from 'react';
  import type { Hex } from 'viem';
  import { useAccount, usePublicClient, useSignMessage } from 'wagmi';
  import { SiweMessage } from 'siwe';
  export function SignInWithEthereum() {
    const [signature, setSignature] = useState<Hex | undefined>(undefined);
    const [valid, setValid] = useState<boolean | undefined>(undefined);
    const { signMessage } = useSignMessage({ mutation: { onSuccess: (sig) => setSignature(sig) } });
    const account = useAccount();
    const client = usePublicClient();

    const message = useMemo(() => {
      return new SiweMessage({
        domain: document.location.host,
        address: account.address,
        chainId: account.chainId,
        uri: document.location.origin,
        version: '1',
        statement: 'Smart Wallet SIWE Example',
        nonce: '12345678', // replace with nonce generated by your backend
      });
    }, []);

    const checkValid = useCallback(async () => {
      if (!signature || !account.address) return;
      client
        .verifyMessage({
          address: account.address,
          message: message.prepareMessage(),
          signature,
        })
        .then((v) => setValid(v));
    }, [signature, account]);

    useEffect(() => {
      checkValid();
    }, [signature, account]);

    const siwe = () => {
      signMessage({ message: message.prepareMessage() });
    };
    return (
      <div>
        <button onClick={siwe}>Sign In with Ethereum</button>
        {signature && <p>Signature: {signature}</p>}
        {valid !== undefined && <p> Is valid: {valid.toString()} </p>}
      </div>
    );
  }
```

## 4. Click "Sign In with Ethereum"



